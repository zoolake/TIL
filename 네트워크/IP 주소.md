# IP 주소

## 개요

- OSI 7계층에서 주소를 갖는 계층은 2계층과 3계층이다.
  - 2계층은 물리 주소인 MAC 주소
  - 3계층은 논리 주소인 IP 주소

## IP 주소 체계

- 흔히 사용하는 IP 주소는 32비트 IPv4 주소
  - IP는 v4, v6 두 체계가 사용되며 IPv6는 128비트
- IPv4 주소 표기시 4개의 옥텟(8비트)으로 나눈다.

  ```
  # IPv4 예시
  10진수 표기 : 192 . 168 . 0 . 1
  2진수 표기 : 11000000 . 10101000 . 00000000 . 00000001

  옥텟 = 8비트 = 1바이트
  IPv4 = 4*옥텟 = 4*8비트 = 32비트
  ```

- **네트워크 주소**와 **호스트 주소**로 나뉜다.
  - 네트워크 주소 : 호스트들을 모은 네트워크를 지칭하는 주소
  - 호스트 주소 : 하나의 네트워크에 존재하는 호스트들을 구분하기 위한 주소
- MAC 주소와 달리 IP 주소의 네트워크 주소와 호스트 주소를 구분하는 경계점이 고정되어 있지 않다.
- 필요한 호스트 IP 개수에 따라 네트워크의 크기를 다르게 할당할 수 있는 **클래스** 개념을 도입
- 클래스 개념을 통해 고정된 네트워크 주소 체계에 비해 주소를 절약할 수 있다는 장점이 있다.
  - 네트워크 크기가 모두 같은 상황을 가정하면 다음과 같은 문제점이 발생 (고정된 네트워크 주소 체계)
  - **큰 네트워크를 필요로 하는 조직**은 네트워크를 여러 개 확보해야 하는 어려움이 있고, 연속된 네트워크를 할당받기 어렵다.
  - **작은 네트워크를 필요로 하는 조직**은 필요 이상의 IP를 가져가게 된다.
- A 클래스
  - 네트워크 | 호스트 | 호스트 | 호스트
  - 첫번째 옥텟의 주소가 10진수로 0~127
    - 2진수로 표기하면 첫번째 옥텟의 8비트 중 **첫 비트가 0이다.**
  - 127은 자신을 의미하는 루프백 주소(로컬 호스트)로 사용되므로 실제로 A 클래스로 사용할 수 있는 주소는 1.0.0.0 ~ 126.255.255.255 이다.
- B 클래스
  - 네트워크 | 네트워크 | 호스트 | 호스트
  - 첫번째 옥텟의 주소가 10진수로 128~191
    - 2진수로 표기하면 첫번째 옥텟의 8비트 중 **첫 비트는 1, 두번째 비트는 0이다.**
- C 클래스
  - 네트워크 | 네트워크 | 네트워크 | 호스트
  - 첫번째 옥텟의 주소가 10진수로 192~223 - 2진수로 표기하면 첫번째 옥텟의 8비트 중 **첫 비트와 두번째 비트는 1, 세번째 비트는 0이다.**
    > **127.0.0.1** 은 로컬 호스트, 즉 자기 자신을 가리키는 IP이며,
    > **0.0.0.0** 은 보통 서브넷 마스크 0.0.0.0과 같이 사용되며 모든 IP를 의미한다.

## **네트워크에서 사용 가능한 호스트 개수 파악하는 방법**

IP 주소 체계에서 **맨 앞의 주소를 네트워크 주소로 사용**하고, **맨 뒤의 주소를 브로드캐스트 주소로 사용**한다.

이 점을 주의하여 호스트 개수를 파악해보면 다음과 같다.

```
# B 클래스에서 사용 가능한 호스트 개수 파악하기
네트워크 주소 : 172.16.0.0
브로드캐스트 주소 : 172.16.255.255
사용 가능한 호스트 범위 : 172.16.0.1 ~ 172.16.255.254
사용 가능한 호스트 개수 : 2^16 - 2
```

## 클래스리스

인터넷이 사용화되면서 호스트의 숫자가 폭발적으로 증가하게 되었고 기존 클래스 기반으로 하는 IP 주소 체계 방식으로도 낭비되는 주소들이 너무 많았다. 이를 해결하기 위해서 클래스리스 개념이 등장하게 된다.

클래스리스 주소 체계에서는 어디까지가 네트워크 주소이고 호스트 주소인지 구분할 수 없다. 이를 구분하기 위해 구분자를 사용해야 하며 이를 **서브넷 마스크** 라고 한다.

## 서브넷 마스크

서브넷 마스크에서 2진수 1은 네트워크 주소, 0은 호스트 주소로 표시한다. 보통 알기쉽게 10진수를 사용하여 표현하면 `255.0.0.0` 과 같이 표현한다. 여기서 255는 네트워크 주소 부분, 0은 호스트 주소 부분으로 구분된다.

```
[2진수로 변환 후 AND 연산을 통해 IP 주소에서 네트워크 주소와 호스트 주소를 알아 낼 수 있다.]

	IP 주소 : 103.9.32.146
& 서브넷 마스크 : 255.255.255.0
--------------------------
	네트워크 주소 : 103.9.32.0
	호스트 주소 : 0.0.0.146
```

## 서브네팅

사용자가 직접 네트워크-호스트 구분 기준을 설정하여 기존 네트워크를 더 쪼개 사용하는 것을 **서브네팅** 이라고 한다.

1비트 단위로 서브네팅이 된 경우, **현재 속해있는 네트워크의 유효 범위를 파악하는 방법**은 다음과 같다.

1. IP 주소를 2진수로 표현
2. 서브넷 마스크를 2진수로 표현
3. 2진수 AND 연산을 통해 서브네팅된 네트워크 주소 도출
4. 호스트 주소 부분을 2진수 1로 모두 변경하여 브로드캐스트 주소 도출
5. 유효 IP 범위를 파악
   1. `서브네팅된 네트워크 주소 + 1 ≤ 유효한 IP 주소 ≤ 브로드캐스트 주소 - 1`
